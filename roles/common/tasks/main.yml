---
# Disable SELinux - TEMP FIX
# Probable cause of issue: self signed SSL certificate
- name: Disable SELinux
  selinux:
    state: disabled

- name: Copy the NGINX repository definition
  copy: src=nginx.repo dest=/etc/yum.repos.d/

- name: Copy the EPEL repository definition
  copy: src=epel.repo dest=/etc/yum.repos.d/

- name: Copy the REMI repository definition
  copy: src=remi.repo dest=/etc/yum.repos.d/

- name: Create the GPG key for NGINX
  copy: src=RPM-GPG-KEY-NGINX dest=/etc/pki/rpm-gpg

- name: Create the GPG key for EPEL
  copy: src=RPM-GPG-KEY-EPEL-7 dest=/etc/pki/rpm-gpg

- name: Create the GPG key for REMI
  copy: src=RPM-GPG-KEY-remi dest=/etc/pki/rpm-gpg
  
# Install VIM text editor for live testing configuration changes
- name: install vim
  apt: name=vim update_cache=yes state=present state=latest
  
# Firewalld install and configuration
- name: Install Firewalld
  yum: name=firewalld state=present

- name: Firewalld service state
  service: name=firewalld state=started enabled=yes
  
# TODO
# Install and configure fail2ban to protect against SSH brute force attacks
  
